"\"groups\":\n- \"interval\": \"1m\"\n  \"name\": \"contextcore_task_progress\"\n  \"rules\":\n  - \"expr\": |\n      max by (project_id, task_id, task_type, sprint_id) (\n        max_over_time(\n          {service=\"contextcore\"} | json\n          | event = \"task.progress_updated\"\n          | unwrap percent_complete [5m]\n        )\n      )\n    \"labels\":\n      \"source\": \"loki\"\n    \"record\": \"project:contextcore_task_percent_complete:max_over_time5m\"\n  - \"expr\": |\n      avg by (project_id, sprint_id) (\n        project:contextcore_task_percent_complete:max_over_time5m{sprint_id!=\"\"}\n      )\n    \"labels\":\n      \"source\": \"derived\"\n    \"record\": \"project_sprint:contextcore_task_percent_complete:avg\"\n  - \"expr\": |\n      count by (project_id, sprint_id) (\n        project:contextcore_task_percent_complete:max_over_time5m == 100\n      )\n    \"labels\":\n      \"source\": \"derived\"\n    \"record\": \"project_sprint:contextcore_task_completed:count\"\n  - \"expr\": |\n      sum by (project_id, task_id) (\n        rate(\n          {service=\"contextcore\"} | json\n          | event = \"task.progress_updated\"\n          | unwrap percent_complete [1h]\n        )\n      )\n    \"labels\":\n      \"source\": \"loki\"\n    \"record\": \"project_task:contextcore_task_progress:rate1h\"\n- \"interval\": \"1m\"\n  \"name\": \"contextcore_task_status\"\n  \"rules\":\n  - \"expr\": |\n      count by (project_id, to_status) (\n        last_over_time(\n          {service=\"contextcore\"} | json\n          | event = \"task.status_changed\" [5m]\n        )\n      )\n    \"labels\":\n      \"source\": \"loki\"\n    \"record\": \"project:contextcore_task_count:count_by_status\""
