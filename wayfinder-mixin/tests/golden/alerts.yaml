"\"groups\":\n- \"name\": \"contextcore_alerts\"\n  \"rules\":\n  - \"alert\": \"ContextCoreExporterFailure\"\n    \"annotations\":\n      \"description\": \"ContextCore OTLP export errors in last 5m. Health reporting impacted.\"\n      \"runbook_url\": \"docs/OPERATIONAL_RUNBOOK.md#otlp-exporter-failure\"\n      \"summary\": \"OTLP exporter failure detected\"\n    \"expr\": |\n      count_over_time(\n        {service=\"contextcore\"} | json\n        | severity_text = \"ERROR\"\n        | body =~ \".*OTLP.*export.*fail.*|.*exporter.*error.*\" [5m]\n      ) > 0\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"critical\"\n  - \"alert\": \"ContextCoreSpanStateLoss\"\n    \"annotations\":\n      \"description\": \"In-flight spans may be lost on restart.\"\n      \"runbook_url\": \"docs/OPERATIONAL_RUNBOOK.md#span-state-loss\"\n      \"summary\": \"Span state persistence failure\"\n    \"expr\": |\n      count_over_time(\n        {service=\"contextcore\"} | json\n        | severity_text = \"ERROR\"\n        | body =~ \".*state.*persist.*fail.*|.*span.*state.*lost.*\" [5m]\n      ) > 0\n    \"for\": \"2m\"\n    \"labels\":\n      \"severity\": \"critical\"\n- \"name\": \"contextcore_task_alerts\"\n  \"rules\":\n  - \"alert\": \"ContextCoreTaskStalled\"\n    \"annotations\":\n      \"runbook_url\": \"docs/OPERATIONAL_RUNBOOK.md#task-stalled\"\n      \"summary\": \"Task {{ $labels.task_id }} stalled > 24h\"\n    \"expr\": |\n      (time() - max by (project_id, task_id) (\n        timestamp(count_over_time(\n          {service=\"contextcore\"} | json\n          | event = \"task.status_changed\" [24h]\n        ) > 0)\n      )) > 86400\n    \"for\": \"1h\"\n    \"labels\":\n      \"severity\": \"warning\"\n- \"name\": \"contextcore_mimir_alerts\"\n  \"rules\":\n  - \"alert\": \"ContextCoreInsightLatencyHigh\"\n    \"annotations\":\n      \"description\": \"Agent insight queries are exceeding the 500ms P99 latency budget.\"\n      \"runbook_url\": \"docs/OPERATIONAL_RUNBOOK.md#insight-latency\"\n      \"summary\": \"Insight query latency > 500ms P99\"\n    \"expr\": |\n      histogram_quantile(0.99,\n        sum(rate(contextcore_insight_query_duration_milliseconds_bucket[5m])) by (le)\n      ) > 500\n    \"for\": \"10m\"\n    \"labels\":\n      \"severity\": \"warning\"\n- \"name\": \"fox_alerts\"\n  \"rules\":\n  - \"alert\": \"FoxEnrichmentFailure\"\n    \"annotations\":\n      \"runbook_url\": \"docs/OPERATIONAL_RUNBOOK.md#fox-enrichment-failure\"\n      \"summary\": \"Fox context enrichment failures detected\"\n    \"expr\": |\n      count_over_time(\n        {service_name=~\".*fox.*\"} | json\n        | level = \"error\"\n        | msg =~ \".*enrich.*fail.*\" [5m]\n      ) > 0\n    \"for\": \"5m\"\n    \"labels\":\n      \"severity\": \"warning\""
